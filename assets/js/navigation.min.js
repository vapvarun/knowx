"use strict";var knowx_keymap={TAB:9};function knowx_initNavigation(){knowx_initNavToggleSubmenus(),knowx_initNavToggleSmall()}function knowx_initNavToggleSubmenus(){var e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(var t=0;t<e.length;t++)knowx_initEachNavToggleSubmenu(e[t])}function knowx_initEachNavToggleSubmenu(e){var t=e.querySelectorAll(".menu ul");if(t.length)for(var n=knowx_getDropdownButton(),o=0;o<t.length;o++){var a=t[o].parentNode,l=a.querySelector(".dropdown");if(!l){(l=document.createElement("span")).classList.add("dropdown");var r=document.createElement("i");r.classList.add("dropdown-symbol"),l.appendChild(r),t[o].parentNode.insertBefore(l,t[o])}var u=n.cloneNode(!0);u.innerHTML=l.innerHTML,l.parentNode.replaceChild(u,l),u.addEventListener("click",function(e){knowx_toggleSubMenu(e.target.parentNode)}),a.addEventListener("mouseleave",function(e){knowx_toggleSubMenu(e.target,!1)}),a.querySelector("a").addEventListener("focus",function(e){for(var t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on"),n=0;n<t.length;n++)knowx_toggleSubMenu(t[n],!1)}),t[o].addEventListener("keydown",function(e){var t="ul.toggle-show > li > a, ul.toggle-show > li > button";knowx_keymap.TAB===e.keyCode&&(e.shiftKey?knowx_isfirstFocusableElement(e.target,document.activeElement,t)&&knowx_toggleSubMenu(e.target.parentNode,!1):knowx_islastFocusableElement(e.target,document.activeElement,t)&&knowx_toggleSubMenu(e.target.parentNode,!1))}),t[o].parentNode.classList.add("menu-item--has-toggle")}}function knowx_initNavToggleSmall(){var e=document.querySelectorAll(".nav--toggle-small");if(e.length)for(var t=0;t<e.length;t++)knowx_initEachNavToggleSmall(e[t])}function knowx_initEachNavToggleSmall(e){var t=e.querySelector(".menu-toggle");t&&(t.setAttribute("aria-expanded","false"),t.addEventListener("click",function(e){e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},!1))}function knowx_toggleSubMenu(e,t){var n=e.querySelector(".dropdown-toggle"),o=e.querySelector("ul"),a=e.classList.contains("menu-item--toggled-on");if(void 0!==t&&"boolean"==typeof t&&(a=!t),n.setAttribute("aria-expanded",(!a).toString()),a){e.classList.remove("menu-item--toggled-on"),o.classList.remove("toggle-show"),n.setAttribute("aria-label",knowxScreenReaderText.expand);for(var l=e.querySelectorAll(".menu-item--toggled-on"),r=0;r<l.length;r++)knowx_toggleSubMenu(l[r],!1)}else{for(var u=e.parentNode.querySelectorAll("li.menu-item--toggled-on"),i=0;i<u.length;i++)knowx_toggleSubMenu(u[i],!1);e.classList.add("menu-item--toggled-on"),o.classList.add("toggle-show"),n.setAttribute("aria-label",knowxScreenReaderText.collapse)}}function knowx_getDropdownButton(){var e=document.createElement("button");return e.classList.add("dropdown-toggle"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",knowxScreenReaderText.expand),e}function knowx_isfirstFocusableElement(e,t,n){var o=e.querySelectorAll(n);return 0<o.length&&t===o[0]}function knowx_islastFocusableElement(e,t,n){var o=e.querySelectorAll(n);return 0<o.length&&t===o[o.length-1]}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",knowx_initNavigation):knowx_initNavigation(),function(){var e=document.getElementById("masthead"),g=document.querySelectorAll(".mobile-menu-container")[0];e&&g&&document.addEventListener("keydown",function(e){var t=g.querySelectorAll("input, a, button"),n=document.querySelector(".menu-close"),o=t[t.length-1],a=t[0],l=document.activeElement,r=9===e.keyCode,u=e.shiftKey,i=jQuery(l).attr("id");"menu-toggle"==i&&jQuery("#"+i).hasClass("menu-toggle-open")&&n.focus(),"menu-close"!=i||jQuery("#menu-toggle").hasClass("menu-toggle-open")||o.focus(),!u&&r&&o===l&&(e.preventDefault(),n.focus()),u&&r&&a===l&&(e.preventDefault(),n.focus()),u&&r&&n===l&&(e.preventDefault(),o.focus())})}();